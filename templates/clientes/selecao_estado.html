{% extends 'shared/base.html' %}
{% load static %}
{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<form name="estado" id="form" class="" action="index.html" method="post" data-funcoes-url="{% url 'ajax_load_estados' %}">
<div class="form-group">
  <label class="control-label col-sm-3" for="estado_id">
    Estado:
  </label>
    <div class="col-sm-8">
      <select  name="estado_id" required id="estado_id">
        <option value="" selected>Selecione</option>
        {% for estado in estados %}
                <option value="{{ estado.id}}" > {{estado.nome}}</option>
        {% endfor %}
      </select>
    </div>
</div>

<div class="form-group">
  <label class="control-label col-sm-3" for="cidade_id">
    Cidade:
  </label>
    <div class="col-sm-8">
      <select  name="cidade_id" required id="cidade_id">
        <option value="" selected>Selecione</option>
        {% for cidade in cidades %}
                <option value="{{ cidade_id.id}}" > {{cidade.nome}}</option>
        {% endfor %}
      </select>
    </div>
</div>

<div class="form-group">
  <label class="control-label col-sm-3" for="bairro_id">
    Bairro:
  </label>
    <div class="col-sm-8">
      <select  name="bairro_id" required id="bairro_id">
        <option value="" selected>Selecione</option>
        {% for bairro in bairros %}
                <option value="{{ bairro_id.id}}"> {{bairro.nome}}</option>
        {% endfor %}
      </select>
      </div>
    </div>
</form>


<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>

<script type="text/javascript">
$("#estado_id").change(function(){
  const url = $('#form').attr("data-funcoes-url");
  estadoid = $(this).val();
  $.ajax({
    url : url,
    data : {'estado_id' : estadoid},
    success: function(data){
             $("#cidade_id").html(data);
    }
  });
});
</script>

  {% endblock %}
